<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>


    <input type='file' id='csvfile' onchange="readFile(this)" />
    <div class="container">

        <!-- Nav pills -->
        <ul class="nav nav-pills" role="tablist">
            <li class="nav-item">
                <a class="nav-link " data-toggle="pill" href="#imbalanced">Imbalanced</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="pill" href="#categorical">Categorical</a>
            </li>

        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
            <div id="imbalanced" class="container tab-pane"><br>

                <button onclick="upSampling()">Up Sampling</button>
                <button onclick="downSampling()">Down Sampling</button>

            </div>

            <div id="categorical" class="container tab-pane"><br>

                <button>One Hot Encoding</button>
                <button>Target Encoding </button>

            </div>

        </div>
    </div>
<div id='data_show'></div>

    <script>
        data = "ok";
        function readFile(input) {
            let file = input.files[0];
            let reader = new FileReader();
            reader.readAsText(file);
            reader.onload = function () {
                data = reader.result;
                //console.log(reader.result);
            };

        }

        function alertmessage() {
            alert(data);
        }

    </script>


    <script>
        const csv = async () => {
            const response = await fetch('csvfile/', {
                method: 'POST',
                body: data, // string or object
                headers: {
                    'Content-Type': 'text/csv'
                }
            });
            // console.log(response.text());
            const myJson = await response.json(); //extract JSON from the http response
            document.getElementById('a').innerHTML = myJson['sample_of_first_n_last_rows']
            var b64Response = btoa(myJson['correlation']);
            document.getElementById('img').src = 'data:image/png;base64,' + b64Response
            // console.log(b64Response)
            //outputImg.src = 'data:image/png;base64,'+b64Response;
            //alert(myJson['missing_vals'])
            // do something with myJson

        }

    </script>

    <!-- Up Sampling -->

    <script>
        const upSampling = async () => {
            const response = await fetch('up_sampling_api/', {
                method: 'POST',
                body: data, // string or object
                headers: {
                    'Content-Type': 'text/html'
                }
            });
            response.text().then(function (result) {
                document.getElementById('data_show').innerHTML = result;
            });
        }
    </script>

    <!-- Correlation -->

    <script>
        const correlation = async () => {
            const response = await fetch('correlation_api/', {
                method: 'POST',
                body: data, // string or object
                headers: {
                    'Content-Type': 'image/png'
                }
            });

            response.text().then(function (result) {
                console.log('data:image/png;base64,' + result)
                document.getElementById('img').src = 'data:image/png;base64,' + result;

            });

        }
    </script>




</body>


</html>