<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
    
    <button onclick="alertmessage()">ok</button>
    <button onclick="csv()">csv</button>
    <input type='file' id='csvfile' onchange="readFile(this)" />
    <p id ='a'>missing vals</p>
>
    <img src="https://www.w3schools.com/html/img_chania.jpg" id ="img" alt="Flowers in Chania" width="460" height="345"/>
   <script>
        data = "ok";
        function readFile(input) {
            let file = input.files[0];
            let reader = new FileReader();
            reader.readAsText(file);
            reader.onload = function () {
                data = reader.result;
                console.log(reader.result);
            };

        }

        function alertmessage() {
            alert(data);
        }

    </script>


    <script>
        const csv = async () => {
            const response = await fetch('csvfile/', {
                method: 'POST',
                body: data, // string or object
                headers: {
                    'Content-Type': 'text/csv'
                }
            });
            // console.log(response.text());
            const myJson = await response.json(); //extract JSON from the http response
            document.getElementById('a').innerHTML=myJson['sample_of_first_n_last_rows']
            var b64Response = btoa(myJson['correlation']);
            document.getElementById('img').src = 'data:image/png;base64,' + b64Response
            console.log(b64Response)
            //outputImg.src = 'data:image/png;base64,'+b64Response;
            //alert(myJson['missing_vals'])
            // do something with myJson

        }
    </script>




</body>


</html>